<div class="space-y-6">
  <!-- Filtros -->
  <div class="bg-white rounded-lg shadow p-4 border border-gray-200">
    <p class="text-lg font-semibold text-gray-700 mb-4">Filtros de Monitoreo</p>
    <div class="flex flex-wrap gap-4">
      <input
        [(ngModel)]="palabraClave"
        type="text"
        placeholder="Buscar por contenido o usuario..."
        class="w-full md:w-1/3 border border-gray-300 rounded px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-blue-400"
      />
      <input
        [(ngModel)]="maxResultados"
        type="number"
        min="1"
        class="w-28 border border-gray-300 rounded px-3 py-2 text-sm"
        placeholder="Máx resultados"
      />
      <select
        class="border border-gray-300 rounded px-3 py-2 text-sm"
        (change)="onPlatformChange($event)"
      >
        <option disabled selected>Selecciona una plataforma</option>
        <option value="x">Twitter / X</option>
        <option value="youtube">YouTube</option>
        <option value="tiktok">TikTok</option>
      </select>
    </div>
  </div>

  <!-- Comentarios detectados -->
  <div class="bg-white rounded-lg shadow p-4 border border-gray-200">
    <p class="text-lg font-semibold text-gray-700 mb-2">
      Comentarios Detectados
    </p>
    <p class="text-sm text-gray-500 mb-4">
      {{ comentarios.length }} comentarios requieren revisión
    </p>

    <div *ngIf="cargando" class="text-sm text-blue-600">
      🔄 Cargando comentarios...
    </div>

    <div
      *ngIf="!cargando && comentarios.length === 0"
      class="text-sm text-gray-500"
    >
      No hay comentarios aún. Inicia una búsqueda.
    </div>

    <div class="space-y-4" *ngIf="!cargando && comentarios.length > 0">
      <div
        *ngFor="let c of comentarios"
        class="p-4 border border-gray-200 rounded-md bg-gray-50"
      >
        <div
          class="flex flex-wrap items-center gap-2 text-xs font-semibold mb-2"
        >
          <span
            *ngIf="c.riesgo > 70"
            class="bg-red-100 text-red-700 px-2 py-0.5 rounded"
            >Amenaza</span
          >
          <span
            class="bg-gray-200 text-gray-700 px-2 py-0.5 rounded"
            >{{ c.etiquetas?.[0] || 'General' }}</span
          >
          <span
            class="bg-gray-200 text-gray-700 px-2 py-0.5 rounded capitalize"
            >{{ c.plataforma }}</span
          >
          <span class="text-gray-500 ml-auto">{{ c.fecha }}</span>
        </div>

        <p class="text-sm text-gray-800 mb-2">"{{ c.comentario }}"</p>
        <p class="text-xs text-gray-500 mb-1">
          Por: {{ c.usuario }} • Confianza: {{ c.confianza }}%
        </p>
        <p class="text-xs text-gray-500">
          Nivel de riesgo:
          <span
            class="inline-block h-2 rounded"
            [ngStyle]="{
              width: '100px',
              backgroundColor:
                c.riesgo > 70
                  ? '#dc2626'
                  : c.riesgo > 40
                  ? '#facc15'
                  : '#16a34a'
            }"
          ></span>
        </p>

        <!-- Acciones -->
        <div class="mt-3 flex gap-2">
          <button
            class="text-sm px-3 py-1 rounded border border-gray-300 text-gray-700 hover:bg-gray-100"
          >
            👁 Revisar
          </button>
          <button
            class="text-sm px-3 py-1 rounded bg-green-100 text-green-700 hover:bg-green-200"
          >
            ✔ Aprobar
          </button>
          <button
            class="text-sm px-3 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200"
          >
            🚫 Bloquear
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
